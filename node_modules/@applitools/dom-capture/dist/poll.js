/* @applitools/dom-capture@7.3.0 */

function __poll() {
  var poll=function(){"use strict";function t(t,n=0){const e=t.charCodeAt(n);if(55296<=e&&e<56320){return 1024*(e-55296)+(t.charCodeAt(n+1)-56320)+65536}return 56320<=e&&e<=57343?-1:e}var n=function(n,e){const r=[];let u=0,s=0;for(let o=0;o<n.length;++o){const c=t(n,o);let l=0;c>0&&(l=c<128?1:c<2048?2:c<65536?3:c<2097152?4:c<67108864?5:6),u+l>e?(r.push(n.substring(s,o)),s=o,u=l):u+=l}return r.push(n.substring(s)),r};const e="WIP",r="SUCCESS",u="SUCCESS_CHUNKED",s="ERROR";var o=function(t,o,c={}){const l=function(t,{chunkByteLength:o=268435456}={}){return t?t.value?o&&(t.chunks||(t.chunks=n(JSON.stringify(t.value),o),t.splitted=t.chunks.length>1),t.splitted)?{status:u,value:t.chunks.shift(),done:0===t.chunks.length}:{status:r,value:t.value}:t.error?{status:s,error:t.error}:{status:e}:{status:s,error:"unexpected poll request received - cannot find state of current operation"}}((t=t||{})[o],c);return(l.status===r||l.status===s||l.status===u&&l.done)&&(t[o]=null),l};var c={chunkify:n,pollify:function(t,n={},e="state"){return r=>function(){return n[e]||(n[e]={},t.apply(null,arguments).then(t=>n[e].value=t).catch(t=>n[e].error=t.message)),o(n,e,r)}},poll:o};const{poll:l}=c;return function(t){return JSON.stringify(l(window.__EYES__APPLITOOLS__,"domCaptureResult",t))}}();

  return poll.apply(this, arguments);
}